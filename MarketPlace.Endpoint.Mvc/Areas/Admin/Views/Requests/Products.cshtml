@using MarketPlace.Domain.Core.Application.Dtos;

@model List<ProductRequestDto>;


<div class="tab-content" id="orders-table-tab-content">
    <div class="tab-pane fade show active" id="orders-all" role="tabpanel" aria-labelledby="orders-all-tab">
        <div class="app-card app-card-orders-table shadow-sm mb-5 p-2">
            <div class="app-card-body">
                <div class="table-responsive">
                    <table class="table app-table-hover mb-0 text-left">
                        <thead>
                            <tr>
                                <th class="cell">آیدی</th>
                                <th class="cell">نام</th>
                                <th class="cell">دسته بندی</th>
                                <th class="cell"></th>
                                <th class="cell"></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var product in Model)
                            {
                                <tr id="@product.Id">
                                    <td class="cell">#@product.Id</td>
                                    <td class="cell"><span class="truncate">@product.Name</span></td>
                                    <td class="cell">@product.CategoryTitle</td>
                                    <td class="cell"><a class="btn-sm app-btn-secondary" onclick="Confirm(@product.Id)" href="#">تایید</a></td>
                                    <td class="cell"><a class="btn-sm app-btn-secondary" onclick="Fale(@product.Id)" href="#">رد</a></td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div><!--//table-responsive-->

            </div><!--//app-card-body-->
        </div><!--//app-card-->

    </div><!--//tab-pane-->

</div><!--//tab-content-->





<script>
    function Confirm(id) {
        $.ajax({
            type: "patch",
            url: `/Requests/ConfirmProduct/` + id,
            data: { id: id },
            dataType: "JSON",
            success: function (response) {
                console.log(response)
                //console.log(response.carts[3].products);
                DeletTr(id);
            },
        });
    }
    function Fale(id) {
        $.ajax({
            type: "patch",
            url: `/Requests/FaleProduct/` + id,
            data: { id: id },
            dataType: "JSON",
            success: function (response) {
                console.log(response)
                //console.log(response.carts[3].products);
                DeletTr(id);
            },
            fail: function (resp) {
                console.log(resp);
            },
        });
    }
    function DeletTr(id) {
        $(`#` + id).remove();
    }
</script>

